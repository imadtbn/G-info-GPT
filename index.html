<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø­Ø¶ÙŠØ±Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù… Ø§Ù„Ø¢Ù„ÙŠ</title>
  <style>
    :root{
      --bg:#0f172a;       /* slate-900 */
      --panel:#111827;    /* gray-900 */
      --ink:#e5e7eb;      /* gray-200 */
      --muted:#9ca3af;    /* gray-400 */
      --accent:#22c55e;   /* green-500 */
      --danger:#ef4444;   /* red-500 */
      --warn:#f59e0b;     /* amber-500 */
      --info:#3b82f6;     /* blue-500 */
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Naskh Arabic UI","Tajawal",Arial,sans-serif}
    a{color:inherit}
    .app{display:grid;grid-template-columns:280px 1fr;min-height:100vh}
    .sidebar{background:var(--panel);border-left:1px solid #222;display:flex;flex-direction:column}
    .brand{padding:20px;border-bottom:1px solid #1f2937;display:flex;align-items:center;gap:10px}
    .brand .logo{width:36px;height:36px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#34d399)}
    .brand h1{margin:0;font-size:18px}
    .nav{padding:10px;overflow:auto}
    .nav button{width:100%;text-align:right;background:transparent;border:0;color:var(--ink);padding:10px 12px;border-radius:12px;cursor:pointer;display:flex;justify-content:space-between;align-items:center}
    .nav button:hover{background:#1f2937}
    .nav button.active{background:#064e3b}.content{padding:20px}
.topbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-bottom:16px}
.chip{background:#1f2937;border:1px solid #2a3340;padding:6px 10px;border-radius:999px;color:var(--muted)}

.card{background:var(--panel);border:1px solid #1f2937;border-radius:16px;padding:16px;margin-bottom:16px}
.grid{display:grid;gap:12px}
.grid.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
.grid.cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}
.grid.cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}
@media(max-width:1100px){.grid.cols-4{grid-template-columns:repeat(2,1fr)}.app{grid-template-columns:1fr}}
@media(max-width:800px){.grid.cols-3{grid-template-columns:repeat(2,1fr)}.grid.cols-2{grid-template-columns:1fr}}

label{font-size:13px;color:var(--muted)}
input,select,textarea{width:100%;padding:10px 12px;border-radius:12px;border:1px solid #334155;background:#0b1220;color:var(--ink)}
textarea{min-height:70px}
.row{display:flex;gap:10px;flex-wrap:wrap}
.btn{border:0;border-radius:12px;padding:10px 14px;cursor:pointer}
.btn.primary{background:var(--accent);color:#052e16}
.btn.warn{background:var(--warn);color:#171003}
.btn.danger{background:var(--danger);color:#3b0a0a}
.btn.ghost{background:#1f2937;color:var(--ink);border:1px solid #2a3340}

table{width:100%;border-collapse:collapse}
th,td{padding:10px;border-bottom:1px solid #1f2937;text-align:right}
th{color:#cbd5e1;font-weight:600;background:#0b1220;position:sticky;top:0}
tr:hover td{background:#0b1220}
.badge{padding:4px 8px;border-radius:999px;font-size:12px;display:inline-block;border:1px solid #2a3340;background:#0b1220}
.badge.ok{border-color:#14532d;color:#86efac}
.badge.bad{border-color:#7f1d1d;color:#fecaca}
.badge.fix{border-color:#78350f;color:#fde68a}
.badge.propose{border-color:#1e293b;color:#93c5fd}

.kpi{display:flex;align-items:center;gap:12px}
.kpi .num{font-size:28px;font-weight:700}
.footer{color:var(--muted);font-size:12px;margin-top:10px}
.hide{display:none !important}
.search{display:flex;gap:10px}
.pill{padding:6px 10px;border:1px solid #2a3340;border-radius:999px;background:#0b1220}

  </style>
</head>
<body>
<div class="app" id="app">
  <aside class="sidebar">
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <div>
        <h1>Ø­Ø¶ÙŠØ±Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù… Ø§Ù„Ø¢Ù„ÙŠ</h1>
        <div class="chip">Ù†Ø³Ø®Ø© Ù…Ø­Ù„ÙŠØ© â€” Ù„Ø§ Ø¥Ù†ØªØ±Ù†Øª</div>
      </div>
    </div>
    <nav class="nav" id="nav"></nav>
    <div class="footer" style="padding:12px">Ø§Ù„Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ (localStorage). ÙŠÙÙ†ØµØ­ Ø¨Ø¹Ù…Ù„ Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ø¯ÙˆØ±ÙŠ.</div>
  </aside>
  <main class="content">
    <div class="topbar">
      <span class="pill">ğŸ“… <span id="today"></span></span>
      <span class="pill">ğŸ—‚ï¸ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª: <b id="k_total">0</b></span>
      <span class="pill">âœ… Ø´ØºÙ‘Ø§Ù„: <b id="k_ok">0</b></span>
      <span class="pill">âš ï¸ Ù…Ø¹Ø·Ù‘Ù„: <b id="k_bad">0</b></span>
      <span class="pill">ğŸ› ï¸ Ù‚ÙŠØ¯ Ø§Ù„ØªØµÙ„ÙŠØ­: <b id="k_fix">0</b></span>
      <span class="pill">ğŸ§¾ Ù…Ù‚ØªØ±Ø­ Ù„Ù„ØµØ±Ù: <b id="k_prop">0</b></span>
    </div><!-- Ù„ÙˆØ­Ø§Øª Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
<section id="page_dashboard" class="page"></section>
<section id="page_inventory" class="page hide"></section>
<section id="page_users" class="page hide"></section>
<section id="page_network" class="page hide"></section>
<section id="page_printers" class="page hide"></section>
<section id="page_maintenance" class="page hide"></section>
<section id="page_documents" class="page hide"></section>
<section id="page_reports" class="page hide"></section>
<section id="page_backup" class="page hide"></section>

  </main>
</div><script>
/*********************************
 * Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ù…Ø­Ù„ÙŠØ©)
 *********************************/
const DB_KEY = 'it_yard_db_v1';
/** Ù‡ÙŠÙƒÙ„Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª */
const db = {
  meta: { createdAt: new Date().toISOString(), version: 1 },
  items: [],       // Ø§Ù„Ø¹ØªØ§Ø¯: Ø­Ø§Ø³ÙˆØ¨ØŒ Ø´Ø§Ø´Ø©ØŒ Ù„ÙˆØ­Ø© Ù…ÙØ§ØªÙŠØ­ØŒ ÙØ§Ø±Ø©ØŒ Ø·Ø§Ø¨Ø¹Ø©ØŒ Ø´Ø¨ÙƒØ©ØŒ Ø·Ø§ÙˆÙ„Ø©ØŒ ÙƒØ±Ø³ÙŠ ...
  users: [],       // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†
  moves: [],       // Ø­Ø±ÙƒØ© Ø§Ù„ØªÙˆØ²ÙŠØ¹/Ø§Ù„ØªØ¨Ø¯ÙŠÙ„/Ø§Ù„Ø­Ø°Ù (Ø³Ø¬Ù„)
  maintenance: [], // Ø³Ø¬Ù„Ø§Øª Ø§Ù„ØµÙŠØ§Ù†Ø©
  docs: {          // Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚: C12 ØªÙˆØ²ÙŠØ¹/Ø§Ø³ØªØ±Ø¬Ø§Ø¹ + ÙˆØ«Ø§Ø¦Ù‚ Ø§Ù„ØªØµÙ„ÙŠØ­
    c12_in: [],    // {id,date,itemId,condition,note}
    c12_out: [],   // {id,date,itemId,condition,note}
    repair: []     // {id,date,itemId,desc,vendor,cost,status}
  }
};

function save(){ localStorage.setItem(DB_KEY, JSON.stringify(db)); renderKPIs(); }
function load(){
  const raw = localStorage.getItem(DB_KEY);
  if(raw){
    try{ const parsed = JSON.parse(raw); Object.assign(db, parsed); }
    catch(e){ console.warn('DB parse error', e) }
  }
}
function uid(prefix='id'){
  return prefix+'_'+Math.random().toString(36).slice(2,9)+'_'+Date.now().toString(36).slice(-4);
}
function todayISO(){ return new Date().toISOString().slice(0,10) }

/*********************************
 * Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø©
 *********************************/
const CATEGORIES = [
  {id:'computer', name:'Ø­Ø§Ø³ÙˆØ¨'},
  {id:'monitor', name:'Ø´Ø§Ø´Ø©'},
  {id:'keyboard', name:'Ù„ÙˆØ­Ø© Ù…ÙØ§ØªÙŠØ­'},
  {id:'mouse', name:'ÙØ£Ø±Ø©'},
  {id:'printer', name:'Ø·Ø§Ø¨Ø¹Ø©'},
  {id:'network', name:'Ø¬Ù‡Ø§Ø² Ø´Ø¨ÙƒØ§Øª/Ø³ÙˆÙŠØªØ´/Ø±ÙˆØªØ±'},
  {id:'table', name:'Ø·Ø§ÙˆÙ„Ø©'},
  {id:'chair', name:'ÙƒØ±Ø³ÙŠ'}
];
const STATUS = [
  {id:'ok', name:'Ø´ØºÙ‘Ø§Ù„'},
  {id:'bad', name:'Ù…Ø¹Ø·Ù‘Ù„'},
  {id:'fix', name:'Ù‚ÙŠØ¯ Ø§Ù„ØªØµÙ„ÙŠØ­'},
  {id:'propose', name:'Ù…Ù‚ØªØ±Ø­ Ù„Ù„ØµØ±Ù'},
  {id:'disposed', name:'Ù…ØµØ±ÙˆÙ'}
];

function categoryName(id){ return CATEGORIES.find(c=>c.id===id)?.name||id }
function statusBadge(id){
  const map={ok:'ok',bad:'bad',fix:'fix',propose:'propose',disposed:'bad'};
  const name=STATUS.find(s=>s.id===id)?.name||id;return `<span class="badge ${map[id]||''}">${name}</span>`
}
function validateIP(v){ return /^((25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(25[0-5]|2[0-4]\d|[01]?\d\d?)$/.test(v) }
function validateMAC(v){ return /^([0-9A-Fa-f]{2}[:\-]){5}([0-9A-Fa-f]{2})$/.test(v) }

function download(filename, text){
  const blob = new Blob([text], {type:'application/octet-stream'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob); a.download = filename; a.click();
  setTimeout(()=>URL.revokeObjectURL(a.href), 1500);
}

function exportCSV(rows, filename='export.csv'){
  const escape = s => '"'+String(s).replace(/"/g,'""')+'"';
  const csv = rows.map(r=>r.map(escape).join(',')).join('\n');
  download(filename, '\uFEFF'+csv); // BOM Ù„ÙØªØ­Ù‡Ø§ ÙÙŠ Excel Ø¹Ø±Ø¨ÙŠ
}

/*********************************
 * ÙˆØ§Ø¬Ù‡Ø© â€” ØªÙ†Ù‚Ù„ Ø§Ù„ØµÙØ­Ø§Øª
 *********************************/
const PAGES = [
  {id:'dashboard', title:'Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©', icon:'ğŸ '},
  {id:'inventory', title:'Ø§Ù„Ù…Ø®Ø²ÙˆÙ†/Ø§Ù„Ø¹ØªØ§Ø¯', icon:'ğŸ’»'},
  {id:'users', title:'Ø­Ø³Ø§Ø¨Ø§Øª ÙˆÙ…Ø³ØªØ®Ø¯Ù…ÙˆÙ†', icon:'ğŸ‘¤'},
  {id:'network', title:'Ø§Ù„Ø´Ø¨ÙƒØ© ÙˆØ¹Ù†Ø§ÙˆÙŠÙ† IP/MAC', icon:'ğŸŒ'},
  {id:'printers', title:'Ø§Ù„Ø·Ø§Ø¨Ø¹Ø§Øª ÙˆØ§Ù„Ø­Ø¨Ø±', icon:'ğŸ–¨ï¸'},
  {id:'maintenance', title:'Ø§Ù„Ø£Ø¹Ø·Ø§Ù„ ÙˆØ§Ù„ØµÙŠØ§Ù†Ø©', icon:'ğŸ› ï¸'},
  {id:'documents', title:'Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ C12 ÙˆØ§Ù„ØªØ³Ù„ÙŠÙ…/Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹ ÙˆØ§Ù„ØªØµÙ„ÙŠØ­', icon:'ğŸ“„'},
  {id:'reports', title:'Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø´Ù‡Ø±ÙŠØ©', icon:'ğŸ“Š'},
  {id:'backup', title:'Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ ÙˆØ§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯', icon:'ğŸ“¦'}
];

function renderNav(){
  const nav=document.getElementById('nav');
  nav.innerHTML = PAGES.map(p=>`<button data-goto="${p.id}" onclick="goto('${p.id}')" id="nav_${p.id}">${p.icon} ${p.title} <span></span></button>`).join('');
}
function goto(id){
  document.querySelectorAll('.page').forEach(e=>e.classList.add('hide'));
  document.querySelector('#page_'+id).classList.remove('hide');
  document.querySelectorAll('.nav button').forEach(b=>b.classList.remove('active'));
  document.getElementById('nav_'+id).classList.add('active');
  // Ø±Ù†Ø¯Ø±Ø© Ø§Ù„ØµÙØ­Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„
  const fn = {
    dashboard: renderDashboard,
    inventory: renderInventory,
    users: renderUsers,
    network: renderNetwork,
    printers: renderPrinters,
    maintenance: renderMaintenance,
    documents: renderDocuments,
    reports: renderReports,
    backup: renderBackup
  }[id];
  if(fn) fn();
}

/*********************************
 * ØµÙØ­Ø©: Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
 *********************************/
function renderKPIs(){
  const total = db.items.length;
  const ok = db.items.filter(i=>i.status==='ok').length;
  const bad = db.items.filter(i=>i.status==='bad').length;
  const fix = db.items.filter(i=>i.status==='fix').length;
  const prop = db.items.filter(i=>i.status==='propose').length;
  document.getElementById('k_total').textContent=total;
  document.getElementById('k_ok').textContent=ok;
  document.getElementById('k_bad').textContent=bad;
  document.getElementById('k_fix').textContent=fix;
  document.getElementById('k_prop').textContent=prop;
}

function renderDashboard(){
  const el = document.getElementById('page_dashboard');
  const lastMoves = db.moves.slice(-8).reverse();
  el.innerHTML = `
    <div class="grid cols-3">
      <div class="card kpi"><div class="num">${db.items.length}</div><div>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹ØªØ§Ø¯</div></div>
      <div class="card kpi"><div class="num">${db.users.length}</div><div>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø§Ù„Ù†Ø´ÙØ·ÙˆÙ†</div></div>
      <div class="card kpi"><div class="num">${db.maintenance.filter(m=>m.status!=='Ù…ØºÙ„Ù‚').length}</div><div>ØªØ°Ø§ÙƒØ± Ù…ÙØªÙˆØ­Ø©</div></div>
    </div>
    <div class="card">
      <h3>Ø¢Ø®Ø± Ø§Ù„Ø­Ø±ÙƒØ§Øª</h3>
      <table><thead><tr><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</th><th>Ø§Ù„Ø¹Ù†ØµØ±</th><th>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th><th>Ù…Ù„Ø§Ø­Ø¸Ø©</th></tr></thead>
      <tbody>
        ${lastMoves.map(m=>`<tr>
          <td class="numbers-latin">${m.date}</td>
          <td>${m.action}</td>
          <td>${itemName(m.itemId)}</td>
          <td>${userName(m.userId)||'-'}</td>
          <td>${m.note||''}</td>
        </tr>`).join('')}
      </tbody></table>
    </div>
  `;
}

/*********************************
 * ØµÙØ­Ø©: Ø§Ù„Ù…Ø®Ø²ÙˆÙ†/Ø§Ù„Ø¹ØªØ§Ø¯
 *********************************/
function itemName(id){ return db.items.find(i=>i.id===id)?.name||'-' }
function userName(id){ return db.users.find(u=>u.id===id)?.fullName||'' }

function renderInventory(){
  const el = document.getElementById('page_inventory');
  const filter = window.inventoryFilter||{q:'',cat:'',stat:''};
  el.innerHTML = `
    <div class="card">
      <div class="row search">
        <input id="inv_q" placeholder="Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…/Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ/Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„..." value="${filter.q||''}" oninput="inventoryFilter.q=this.value; renderInventory();">
        <select id="inv_cat" onchange="inventoryFilter.cat=this.value; renderInventory();">
          <option value="">ÙƒÙ„ Ø§Ù„ÙØ¦Ø§Øª</option>
          ${CATEGORIES.map(c=>`<option value="${c.id}" ${filter.cat===c.id?'selected':''}>${c.name}</option>`).join('')}
        </select>
        <select id="inv_stat" onchange="inventoryFilter.stat=this.value; renderInventory();">
          <option value="">ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª</option>
          ${STATUS.map(s=>`<option value="${s.id}" ${filter.stat===s.id?'selected':''}>${s.name}</option>`).join('')}
        </select>
        <button class="btn ghost" onclick="exportInventoryCSV()">â¬‡ï¸ ØªØµØ¯ÙŠØ± CSV (Excel)</button>
        <button class="btn primary" onclick="openItemForm()">â• Ø¥Ø¶Ø§ÙØ© Ù…ÙƒÙˆÙ‘Ù†</button>
      </div>
    </div>

    <div class="card" id="inv_form_wrap" style="display:none"></div>

    <div class="card">
      <table>
        <thead><tr>
          <th>#</th><th>Ø§Ù„ÙØ¦Ø©</th><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ø¹Ù„Ø§Ù…Ø©/Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„</th><th>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ</th>
          <th>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th><th>Ø§Ù„Ø´Ø¨ÙƒØ© (IP / MAC)</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th><th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
        </tr></thead>
        <tbody id="inv_tbody"></tbody>
      </table>
    </div>
  `;
  const q=(filter.q||'').toLowerCase();
  const rows = db.items.filter(i=>
    (!filter.cat||i.category===filter.cat) &&
    (!filter.stat||i.status===filter.stat) &&
    (!q || [i.name,i.brand,i.model,i.serial].some(v=>String(v||'').toLowerCase().includes(q)))
  );
  const tbody=document.getElementById('inv_tbody');
  tbody.innerHTML = rows.map((i,idx)=>`<tr>
    <td class="numbers-latin">${idx+1}</td>
    <td>${categoryName(i.category)}</td>
    <td>${i.name||''}</td>
    <td>${i.brand||''} / ${i.model||''}</td>
    <td class="numbers-latin">${i.serial||''}</td>
    <td>${userName(i.assignedTo)||'-'}</td>
    <td class="numbers-latin">${(i.net?.ip||'-')} / ${(i.net?.mac||'-')}</td>
    <td>${statusBadge(i.status)}</td>
    <td>
      <button class="btn ghost" onclick="openItemForm('${i.id}')">ØªØ¹Ø¯ÙŠÙ„</button>
      <button class="btn warn" onclick="assignItem('${i.id}')">ØªÙˆØ²ÙŠØ¹/ØªØ¨Ø¯ÙŠÙ„</button>
      <button class="btn danger" onclick="deleteItem('${i.id}')">Ø­Ø°Ù</button>
    </td>
  </tr>`).join('');
}

function openItemForm(id){
  const wrap=document.getElementById('inv_form_wrap');
  const item = id? db.items.find(i=>i.id===id): {id:uid('it'),category:'computer',name:'',brand:'',model:'',serial:'',status:'ok',assignedTo:'',net:{ip:'',mac:''},printer:{toner:'',ink:''},note:''};
  wrap.style.display='block';
  wrap.innerHTML = `
    <h3>${id?'ØªØ¹Ø¯ÙŠÙ„ Ù…ÙƒÙˆÙ‘Ù†':'Ø¥Ø¶Ø§ÙØ© Ù…ÙƒÙˆÙ‘Ù† Ø¬Ø¯ÙŠØ¯'}</h3>
    <div class="grid cols-4">
      <div><label>Ø§Ù„ÙØ¦Ø©</label><select id="f_cat">${CATEGORIES.map(c=>`<option value="${c.id}" ${c.id===item.category?'selected':''}>${c.name}</option>`).join('')}</select></div>
      <div><label>Ø§Ù„ØªØ³Ù…ÙŠØ©</label><input id="f_name" value="${item.name||''}" placeholder="Ù…Ø«Ø§Ù„: Ø­Ø§Ø³ÙˆØ¨ Ù…ÙƒØªØ¨ Ø±Ø¦ÙŠØ³ÙŠ"/></div>
      <div><label>Ø§Ù„Ø¹Ù„Ø§Ù…Ø©</label><input id="f_brand" value="${item.brand||''}" placeholder="Canon, HP, Dell..."/></div>
      <div><label>Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„</label><input id="f_model" value="${item.model||''}" placeholder="LBP232 Ù…Ø«Ù„Ø§"/></div>
      <div><label>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ</label><input id="f_serial" value="${item.serial||''}"/></div>
      <div><label>Ø§Ù„Ø­Ø§Ù„Ø©</label><select id="f_status">${STATUS.map(s=>`<option value="${s.id}" ${s.id===item.status?'selected':''}>${s.name}</option>`).join('')}</select></div>
      <div><label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù† IP</label><input id="f_ip" value="${item.net?.ip||''}" placeholder="192.168.1.10"/></div>
      <div><label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù† MAC</label><input id="f_mac" value="${item.net?.mac||''}" placeholder="AA:BB:CC:DD:EE:FF"/></div>
      <div><label>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
        <select id="f_user"><option value="">â€” ØºÙŠØ± Ù…Ø®ØµØµ â€”</option>${db.users.map(u=>`<option value="${u.id}" ${u.id===item.assignedTo?'selected':''}>${u.fullName}</option>`).join('')}</select>
      </div>
      <div><label>Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø¨Ø±/Ø§Ù„Ø·ÙˆÙ†ÙŠØ± (Ù„Ù„Ø·Ø§Ø¨Ø¹Ø§Øª)</label><input id="f_toner" value="${item.printer?.toner||''}" placeholder="Ù…Ø«Ø§Ù„: 40%"/></div>
      <div class="cols-2" style="grid-column:span 2"><label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label><textarea id="f_note">${item.note||''}</textarea></div></div>
<div class="row" style="margin-top:10px">
  <button class="btn primary" onclick="saveItem('${id||''}')">ğŸ’¾ Ø­ÙØ¸</button>
  <button class="btn ghost" onclick="document.getElementById('inv_form_wrap').style.display='none'">Ø¥ØºÙ„Ø§Ù‚</button>
</div>

`; }

function saveItem(id){ const item = id? db.items.find(i=>i.id===id): {id:uid('it')}; Object.assign(item, { category: document.getElementById('f_cat').value, name: document.getElementById('f_name').value.trim(), brand: document.getElementById('f_brand').value.trim(), model: document.getElementById('f_model').value.trim(), serial: document.getElementById('f_serial').value.trim(), status: document.getElementById('f_status').value, assignedTo: document.getElementById('f_user').value, net: { ip: document.getElementById('f_ip').value.trim(), mac: document.getElementById('f_mac').value.trim() }, printer: { toner: document.getElementById('f_toner').value.trim() }, note: document.getElementById('f_note').value.trim() }); // ØªØ­Ù‚Ù‚ Ø¨Ø³ÙŠØ· Ù„Ù„Ø´Ø¨ÙƒØ© if(item.net.ip && !validateIP(item.net.ip)) return alert('ØµÙŠØºØ© IP ØºÙŠØ± ØµØ­ÙŠØ­Ø©'); if(item.net.mac && !validateMAC(item.net.mac)) return alert('ØµÙŠØºØ© MAC ØºÙŠØ± ØµØ­ÙŠØ­Ø©'); if(!id) db.items.push(item); save(); renderInventory(); }

function deleteItem(id){ if(!confirm('ØªØ£ÙƒÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ù…ÙƒÙˆÙ‘Ù†ØŸ')) return; const i = db.items.findIndex(x=>x.id===id); if(i>-1) db.items.splice(i,1); save(); renderInventory(); }

function assignItem(itemId){ const item = db.items.find(i=>i.id===itemId); const userId = prompt('Ø£Ø¯Ø®Ù„ Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ø§Ø®ØªØ± Ù…Ù† ØµÙØ­Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†)\nØ£Ùˆ Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºÙ‹Ø§ Ù„Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ®ØµÙŠØµ:', item.assignedTo||'')||''; const note = prompt('Ù…Ù„Ø§Ø­Ø¸Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):','')||''; const move = { id:uid('mv'), date: todayISO(), action: userId? 'ØªÙˆØ²ÙŠØ¹/ØªØ¨Ø¯ÙŠÙ„' : 'Ø¥Ù„ØºØ§Ø¡ ØªØ®ØµÙŠØµ', itemId, userId, note }; db.moves.push(move); item.assignedTo = userId; save(); renderInventory(); }

function exportInventoryCSV(){ const rows = [ ['Ø§Ù„ÙØ¦Ø©','Ø§Ù„ØªØ³Ù…ÙŠØ©','Ø§Ù„Ø¹Ù„Ø§Ù…Ø©','Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„','Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ','Ø§Ù„Ø­Ø§Ù„Ø©','Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…','IP','MAC','Ù…Ù„Ø§Ø­Ø¸Ø§Øª'] ]; db.items.forEach(i=>rows.push([ categoryName(i.category), i.name||'', i.brand||'', i.model||'', i.serial||'', STATUS.find(s=>s.id===i.status)?.name||i.status, userName(i.assignedTo)||'', i.net?.ip||'', i.net?.mac||'', i.note||'' ])); exportCSV(rows, 'inventory.csv'); }

/*********************************

ØµÙØ­Ø©: Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† *********************************/ function renderUsers(){ const el = document.getElementById('page_users'); el.innerHTML = `

 <div class="card">
   <div class="row">
     <input id="u_q" placeholder="Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…/Ø§Ù„ÙˆØ¸ÙŠÙØ©/Ø§Ù„Ù…ØµÙ„Ø­Ø©" oninput="renderUsers()"/>
     <button class="btn primary" onclick="openUserForm()">â• Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù…</button>
     <button class="btn ghost" onclick="exportUsersCSV()">â¬‡ï¸ ØªØµØ¯ÙŠØ± CSV</button>
   </div>
 </div>
 <div class="card" id="user_form" style="display:none"></div>
 <div class="card">
   <table><thead><tr><th>#</th><th>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</th><th>Ø§Ù„ÙˆØ¸ÙŠÙØ©</th><th>Ø§Ù„Ù…ØµÙ„Ø­Ø©</th><th>Ø§Ù„Ù‡Ø§ØªÙ</th><th>Ø§Ù„Ø¨Ø±ÙŠØ¯</th><th>Ø£Ø¬Ù‡Ø²ØªÙ‡</th><th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th></tr></thead>
   <tbody>
     ${db.users.filter(u=>{
       const q=(document.getElementById('u_q')?.value||'').toLowerCase();
       return !q || [u.fullName,u.role,u.dept,u.phone,u.email].some(v=>String(v||'').toLowerCase().includes(q));
     }).map((u,idx)=>`<tr>
       <td class="numbers-latin">${idx+1}</td>
       <td>${u.fullName}</td>
       <td>${u.role||''}</td>
       <td>${u.dept||''}</td>
       <td class="numbers-latin">${u.phone||''}</td>
       <td>${u.email||''}</td>
       <td>${db.items.filter(i=>i.assignedTo===u.id).map(i=>i.name).join('ØŒ ')||'-'}</td>
       <td>
         <button class="btn ghost" onclick="openUserForm('${u.id}')">ØªØ¹Ø¯ÙŠÙ„</button>
         <button class="btn danger" onclick="deleteUser('${u.id}')">Ø­Ø°Ù</button>
       </td>
     </tr>`).join('')}
   </tbody></table>
 </div>
`; }

function openUserForm(id){ const wrap=document.getElementById('user_form'); const u = id? db.users.find(x=>x.id===id) : {id:uid('u'),fullName:'',role:'',dept:'',phone:'',email:''}; wrap.style.display='block'; wrap.innerHTML = <h3>${id?'ØªØ¹Ø¯ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù…':'Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù…'}</h3> <div class="grid cols-3"> <div><label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label><input id="u_name" value="${u.fullName}"/></div> <div><label>Ø§Ù„ÙˆØ¸ÙŠÙØ©</label><input id="u_role" value="${u.role||''}"/></div> <div><label>Ø§Ù„Ù…ØµÙ„Ø­Ø©</label><input id="u_dept" value="${u.dept||''}"/></div> <div><label>Ø§Ù„Ù‡Ø§ØªÙ</label><input id="u_phone" value="${u.phone||''}"/></div> <div><label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label><input id="u_email" value="${u.email||''}"/></div> </div> <div class="row" style="margin-top:10px"> <button class="btn primary" onclick="saveUser('${id||''}')">ğŸ’¾ Ø­ÙØ¸</button> <button class="btn ghost" onclick="document.getElementById('user_form').style.display='none'">Ø¥ØºÙ„Ø§Ù‚</button> </div>; }

function saveUser(id){ const u = id? db.users.find(x=>x.id===id): {id:uid('u')}; Object.assign(u, { fullName: document.getElementById('u_name').value.trim(), role: document.getElementById('u_role').value.trim(), dept: document.getElementById('u_dept').value.trim(), phone: document.getElementById('u_phone').value.trim(), email: document.getElementById('u_email').value.trim(), }); if(!id) db.users.push(u); save(); renderUsers(); }

function deleteUser(id){ if(!confirm('Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø³ÙŠØ²ÙŠÙ„ Ø§Ø±ØªØ¨Ø§Ø·Ù‡ Ø¨Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©ØŒ Ù…ØªØ§Ø¨Ø¹Ø©ØŸ')) return; db.items.forEach(i=>{ if(i.assignedTo===id) i.assignedTo=''; }); const i = db.users.findIndex(u=>u.id===id); if(i>-1) db.users.splice(i,1); save(); renderUsers(); }

function exportUsersCSV(){ const rows = [['Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„','Ø§Ù„ÙˆØ¸ÙŠÙØ©','Ø§Ù„Ù…ØµÙ„Ø­Ø©','Ø§Ù„Ù‡Ø§ØªÙ','Ø§Ù„Ø¨Ø±ÙŠØ¯','Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©']]; db.users.forEach(u=>rows.push([u.fullName,u.role||'',u.dept||'',u.phone||'',u.email||'', db.items.filter(i=>i.assignedTo===u.id).map(i=>i.name).join(' | ')])); exportCSV(rows,'users.csv'); }

/*********************************

ØµÙØ­Ø©: Ø§Ù„Ø´Ø¨ÙƒØ© *********************************/ function renderNetwork(){ const el = document.getElementById('page_network'); const items = db.items.filter(i=>i.net && (i.net.ip||i.net.mac)); el.innerHTML = `

 <div class="card">
   <div class="row">
     <input id="n_q" placeholder="Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…/Ø§Ù„Ù€ IP/MAC" oninput="renderNetwork()"/>
     <button class="btn ghost" onclick="exportNetworkCSV()">â¬‡ï¸ ØªØµØ¯ÙŠØ± CSV</button>
   </div>
 </div>
 <div class="card">
   <table><thead><tr><th>#</th><th>Ø§Ù„Ø¹Ù†ØµØ±</th><th>Ø§Ù„ÙØ¦Ø©</th><th>IP</th><th>MAC</th><th>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th><th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th></tr></thead>
   <tbody>
     ${items.filter(i=>{
       const q=(document.getElementById('n_q')?.value||'').toLowerCase();
       return !q || [i.name,i.net?.ip,i.net?.mac].some(v=>String(v||'').toLowerCase().includes(q));
     }).map((i,idx)=>`<tr>
       <td class="numbers-latin">${idx+1}</td>
       <td>${i.name}</td>
       <td>${categoryName(i.category)}</td>
       <td class="numbers-latin">${i.net?.ip||''}</td>
       <td class="numbers-latin">${i.net?.mac||''}</td>
       <td>${userName(i.assignedTo)||'-'}</td>
       <td>${i.note||''}</td>
     </tr>`).join('')}
   </tbody></table>
 </div>
`; } function exportNetworkCSV(){ const rows = [['Ø§Ù„Ø¹Ù†ØµØ±','Ø§Ù„ÙØ¦Ø©','IP','MAC','Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…','Ù…Ù„Ø§Ø­Ø¸Ø§Øª']]; db.items.filter(i=>i.net&&(i.net.ip||i.net.mac)).forEach(i=>rows.push([i.name,categoryName(i.category),i.net?.ip||'',i.net?.mac||'',userName(i.assignedTo)||'',i.note||''])); exportCSV(rows,'network.csv'); }

/*********************************

ØµÙØ­Ø©: Ø§Ù„Ø·Ø§Ø¨Ø¹Ø§Øª *********************************/ function renderPrinters(){ const el = document.getElementById('page_printers'); const printers = db.items.filter(i=>i.category==='printer'); el.innerHTML = `

 <div class="card">
   <div class="row">
     <button class="btn ghost" onclick="exportPrintersCSV()">â¬‡ï¸ ØªØµØ¯ÙŠØ± CSV</button>
   </div>
 </div>
 <div class="card">
   <table><thead><tr><th>#</th><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ø¹Ù„Ø§Ù…Ø©/Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„</th><th>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ</th><th>Ø§Ù„Ø­Ø¨Ø±/Ø§Ù„Ø·ÙˆÙ†ÙŠØ±</th><th>IP</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th><th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th></tr></thead>
   <tbody>
     ${printers.map((p,idx)=>`<tr>
       <td class="numbers-latin">${idx+1}</td>
       <td>${p.name}</td>
       <td>${p.brand||''} / ${p.model||''}</td>
       <td class="numbers-latin">${p.serial||''}</td>
       <td>${p.printer?.toner||''}</td>
       <td class="numbers-latin">${p.net?.ip||''}</td>
       <td>${statusBadge(p.status)}</td>
       <td><button class="btn ghost" onclick="openItemForm('${p.id}')">ØªØ­Ø¯ÙŠØ«</button></td>
     </tr>`).join('')}
   </tbody></table>
 </div>
`; } function exportPrintersCSV(){ const rows = [['Ø§Ù„Ø§Ø³Ù…','Ø§Ù„Ø¹Ù„Ø§Ù…Ø©','Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„','Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ','Ø§Ù„Ø­Ø¨Ø±/Ø§Ù„Ø·ÙˆÙ†ÙŠØ±','IP','Ø§Ù„Ø­Ø§Ù„Ø©']]; db.items.filter(i=>i.category==='printer').forEach(p=>rows.push([p.name,p.brand||'',p.model||'',p.serial||'',p.printer?.toner||'',p.net?.ip||'',STATUS.find(s=>s.id===p.status)?.name||p.status])); exportCSV(rows,'printers.csv'); }

/*********************************

ØµÙØ­Ø©: Ø§Ù„ØµÙŠØ§Ù†Ø© ÙˆØ§Ù„Ø£Ø¹Ø·Ø§Ù„ *********************************/ function renderMaintenance(){ const el = document.getElementById('page_maintenance'); el.innerHTML = `

 <div class="card">
   <div class="row">
     <button class="btn primary" onclick="openTicketForm()">â• ÙØªØ­ ØªØ°ÙƒØ±Ø© ØµÙŠØ§Ù†Ø©</button>
     <button class="btn ghost" onclick="exportMaintenanceCSV()">â¬‡ï¸ ØªØµØ¯ÙŠØ± CSV</button>
   </div>
 </div>
 <div class="card" id="m_form" style="display:none"></div>
 <div class="card">
   <table><thead><tr><th>#</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„Ø¹Ù†ØµØ±</th><th>Ø§Ù„ÙˆØµÙ</th><th>Ø§Ù„Ù…ÙˆØ±Ù‘Ø¯/Ù…Ø±ÙƒØ² Ø§Ù„ØµÙŠØ§Ù†Ø©</th><th>Ø§Ù„ØªÙƒÙ„ÙØ©</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th><th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th></tr></thead>
   <tbody>
     ${db.maintenance.map((t,idx)=>`<tr>
       <td class="numbers-latin">${idx+1}</td>
       <td class="numbers-latin">${t.date}</td>
       <td>${itemName(t.itemId)}</td>
       <td>${t.desc||''}</td>
       <td>${t.vendor||''}</td>
       <td class="numbers-latin">${t.cost||''}</td>
       <td>${t.status}</td>
       <td>
         <button class="btn ghost" onclick="openTicketForm('${t.id}')">ØªØ¹Ø¯ÙŠÙ„</button>
         <button class="btn danger" onclick="deleteTicket('${t.id}')">Ø­Ø°Ù</button>
       </td>
     </tr>`).join('')}
   </tbody></table>
 </div>
`; }

function openTicketForm(id){ const wrap=document.getElementById('m_form'); const t = id? db.maintenance.find(x=>x.id===id): {id:uid('mt'),date:todayISO(),itemId:'',desc:'',vendor:'',cost:'',status:'Ù…ÙØªÙˆØ­'}; wrap.style.display='block'; wrap.innerHTML =  <h3>${id?'ØªØ¹Ø¯ÙŠÙ„ ØªØ°ÙƒØ±Ø© ØµÙŠØ§Ù†Ø©':'ÙØªØ­ ØªØ°ÙƒØ±Ø© ØµÙŠØ§Ù†Ø©'}</h3> <div class="grid cols-4"> <div><label>Ø§Ù„ØªØ§Ø±ÙŠØ®</label><input id="t_date" type="date" value="${t.date}"/></div> <div><label>Ø§Ù„Ø¹Ù†ØµØ±</label><select id="t_item">${db.items.map(i=><option value="${i.id}" ${i.id===t.itemId?'selected':''}>${i.name}</option>).join('')}</select></div> <div><label>Ø§Ù„Ù…ÙˆØ±Ù‘Ø¯/Ù…Ø±ÙƒØ² Ø§Ù„ØµÙŠØ§Ù†Ø©</label><input id="t_vendor" value="${t.vendor||''}"/></div> <div><label>Ø§Ù„ØªÙƒÙ„ÙØ©</label><input id="t_cost" type="number" step="0.01" value="${t.cost||''}"/></div> <div class="cols-2" style="grid-column:span 2"><label>Ø§Ù„ÙˆØµÙ</label><textarea id="t_desc">${t.desc||''}</textarea></div> <div><label>Ø§Ù„Ø­Ø§Ù„Ø©</label><select id="t_status">${['Ù…ÙØªÙˆØ­','Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°','Ù…ØºÙ„Ù‚'].map(s=><option ${s===t.status?'selected':''}>${s}</option>).join('')}</select></div> </div> <div class="row" style="margin-top:10px"> <button class="btn primary" onclick="saveTicket('${id||''}')">ğŸ’¾ Ø­ÙØ¸</button> <button class="btn ghost" onclick="document.getElementById('m_form').style.display='none'">Ø¥ØºÙ„Ø§Ù‚</button> </div> ; }

function saveTicket(id){ const t = id? db.maintenance.find(x=>x.id===id): {id:uid('mt')}; Object.assign(t, { date: document.getElementById('t_date').value||todayISO(), itemId: document.getElementById('t_item').value, vendor: document.getElementById('t_vendor').value.trim(), cost: document.getElementById('t_cost').value, desc: document.getElementById('t_desc').value.trim(), status: document.getElementById('t_status').value }); if(!id) db.maintenance.push(t); save(); renderMaintenance(); } function deleteTicket(id){ if(!confirm('ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°ÙØŸ'))return; const i=db.maintenance.findIndex(x=>x.id===id); if(i>-1) db.maintenance.splice(i,1); save(); renderMaintenance(); } function exportMaintenanceCSV(){ const rows = [['Ø§Ù„ØªØ§Ø±ÙŠØ®','Ø§Ù„Ø¹Ù†ØµØ±','Ø§Ù„ÙˆØµÙ','Ø§Ù„Ù…ÙˆØ±Ù‘Ø¯','Ø§Ù„ØªÙƒÙ„ÙØ©','Ø§Ù„Ø­Ø§Ù„Ø©']]; db.maintenance.forEach(t=>rows.push([t.date,itemName(t.itemId),t.desc||'',t.vendor||'',t.cost||'',t.status])); exportCSV(rows,'maintenance.csv'); }

/*********************************

ØµÙØ­Ø©: Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ C12 + ÙˆØ«Ø§Ø¦Ù‚ Ø§Ù„ØªØµÙ„ÙŠØ­ *********************************/ function renderDocuments(){ const el = document.getElementById('page_documents'); el.innerHTML = `

 <div class="grid cols-2">
   <div class="card">
     <h3>ğŸ“¥ C12 / ØªÙˆØ²ÙŠØ¹ â€” Ø¯Ø®ÙˆÙ„ Ù…Ù† Ø§Ù„Ù…ØµÙ„Ø­Ø© Ø§Ù„Ø£Ù…</h3>
     <div class="row"><button class="btn primary" onclick="openC12Form('in')">â• Ø¥Ø¶Ø§ÙØ© ÙˆØ«ÙŠÙ‚Ø©</button></div>
     <div id="c12_in_form" class="hide"></div>
     <table style="margin-top:10px"><thead><tr><th>#</th><th>Ø±Ù‚Ù… Ø§Ù„ÙˆØ«ÙŠÙ‚Ø©</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„Ø¹Ù†ØµØ±</th><th>Ø­Ø§Ù„Ø© Ø§Ù„Ø¹ØªØ§Ø¯</th><th>Ù…Ù„Ø§Ø­Ø¸Ø©</th><th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th></tr></thead>
       <tbody>
         ${db.docs.c12_in.map((d,idx)=>`<tr>
           <td class="numbers-latin">${idx+1}</td>
           <td class="numbers-latin">${d.id}</td>
           <td class="numbers-latin">${d.date}</td>
           <td>${itemName(d.itemId)}</td>
           <td>${d.condition||''}</td>
           <td>${d.note||''}</td>
           <td><button class="btn ghost" onclick="openC12Form('in','${d.id}')">ØªØ¹Ø¯ÙŠÙ„</button> <button class="btn danger" onclick="deleteDoc('in','${d.id}')">Ø­Ø°Ù</button></td>
         </tr>`).join('')}
       </tbody>
     </table>
   </div>   <div class="card">
     <h3>ğŸ“¤ C12 / Ø§Ø³ØªØ±Ø¬Ø§Ø¹ â€” Ø®Ø±ÙˆØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ù…ØµÙ„Ø­Ø© Ø§Ù„Ø£Ù…</h3>
     <div class="row"><button class="btn primary" onclick="openC12Form('out')">â• Ø¥Ø¶Ø§ÙØ© ÙˆØ«ÙŠÙ‚Ø©</button></div>
     <div id="c12_out_form" class="hide"></div>
     <table style="margin-top:10px"><thead><tr><th>#</th><th>Ø±Ù‚Ù… Ø§Ù„ÙˆØ«ÙŠÙ‚Ø©</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„Ø¹Ù†ØµØ±</th><th>Ø­Ø§Ù„Ø© Ø§Ù„Ø¹ØªØ§Ø¯</th><th>Ù…Ù„Ø§Ø­Ø¸Ø©</th><th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th></tr></thead>
       <tbody>
         ${db.docs.c12_out.map((d,idx)=>`<tr>
           <td class="numbers-latin">${idx+1}</td>
           <td class="numbers-latin">${d.id}</td>
           <td class="numbers-latin">${d.date}</td>
           <td>${itemName(d.itemId)}</td>
           <td>${d.condition||''}</td>
           <td>${d.note||''}</td>
           <td><button class="btn ghost" onclick="openC12Form('out','${d.id}')">ØªØ¹Ø¯ÙŠÙ„</button> <button class="btn danger" onclick="deleteDoc('out','${d.id}')">Ø­Ø°Ù</button></td>
         </tr>`).join('')}
       </tbody>
     </table>
   </div>   <div class="card" style="grid-column:span 2">
     <h3>ğŸ§¾ ÙˆØ«Ø§Ø¦Ù‚ Ø§Ù„ØªØµÙ„ÙŠØ­</h3>
     <div class="row"><button class="btn primary" onclick="openRepairDocForm()">â• Ø¥Ø¶Ø§ÙØ© ÙˆØ«ÙŠÙ‚Ø© ØªØµÙ„ÙŠØ­</button></div>
     <div id="rep_form" class="hide"></div>
     <table style="margin-top:10px"><thead><tr><th>#</th><th>Ø±Ù‚Ù… Ø§Ù„ÙˆØ«ÙŠÙ‚Ø©</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„Ø¹Ù†ØµØ±</th><th>ÙˆØµÙ Ø§Ù„Ø¹Ø·Ù„</th><th>Ø§Ù„Ù…ÙˆØ±Ù‘Ø¯</th><th>Ø§Ù„ØªÙƒÙ„ÙØ©</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th><th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th></tr></thead>
       <tbody>
         ${db.docs.repair.map((r,idx)=>`<tr>
           <td class="numbers-latin">${idx+1}</td>
           <td class="numbers-latin">${r.id}</td>
           <td class="numbers-latin">${r.date}</td>
           <td>${itemName(r.itemId)}</td>
           <td>${r.desc||''}</td>
           <td>${r.vendor||''}</td>
           <td class="numbers-latin">${r.cost||''}</td>
           <td>${r.status||''}</td>
           <td><button class="btn ghost" onclick="openRepairDocForm('${r.id}')">ØªØ¹Ø¯ÙŠÙ„</button> <button class="btn danger" onclick="deleteRepairDoc('${r.id}')">Ø­Ø°Ù</button></td>
         </tr>`).join('')}
       </tbody>
     </table>
   </div>
 </div>
`; }

function openC12Form(kind, id){ const list = kind==='in'? db.docs.c12_in : db.docs.c12_out; const wrap = document.getElementById('c12_'+kind+'_form'); const d = id? list.find(x=>x.id===id): {id: '', date: todayISO(), itemId:'', condition:'', note:''}; wrap.classList.remove('hide'); wrap.innerHTML =  <div class="card" style="background:#0b1220;margin-top:10px"> <div class="grid cols-4"> <div><label>Ø±Ù‚Ù… Ø§Ù„ÙˆØ«ÙŠÙ‚Ø©</label><input id="d_id" value="${d.id}" placeholder="Ù…Ø«Ù„: C12-2025-001"/></div> <div><label>Ø§Ù„ØªØ§Ø±ÙŠØ®</label><input id="d_date" type="date" value="${d.date}"/></div> <div><label>Ø§Ù„Ø¹Ù†ØµØ±</label><select id="d_item">${db.items.map(i=><option value="${i.id}" ${i.id===d.itemId?'selected':''}>${i.name}</option>).join('')}</select></div> <div><label>Ø­Ø§Ù„Ø© Ø§Ù„Ø¹ØªØ§Ø¯</label><input id="d_cond" value="${d.condition||''}" placeholder="Ø¬ÙŠØ¯/Ù…ØªÙˆØ³Ø·/Ù…ØªØ¯Ù‡ÙˆØ±..."/></div> <div class="cols-2" style="grid-column:span 2"><label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label><textarea id="d_note">${d.note||''}</textarea></div> </div> <div class="row" style="margin-top:10px"> <button class="btn primary" onclick="saveC12('${kind}','${id||''}')">ğŸ’¾ Ø­ÙØ¸</button> <button class="btn ghost" onclick="document.getElementById('c12_${kind}_form').classList.add('hide')">Ø¥ØºÙ„Ø§Ù‚</button> </div> </div> ; }

function saveC12(kind, id){ const list = kind==='in'? db.docs.c12_in : db.docs.c12_out; let d = id? list.find(x=>x.id===id): { }; const newId = document.getElementById('d_id').value.trim(); Object.assign(d, { id: newId, date: document.getElementById('d_date').value||todayISO(), itemId: document.getElementById('d_item').value, condition: document.getElementById('d_cond').value.trim(), note: document.getElementById('d_note').value.trim() }); if(!id){ // Ù…Ù†Ø¹ ØªÙƒØ±Ø§Ø± Ù†ÙØ³ Ø±Ù‚Ù… Ø§Ù„ÙˆØ«ÙŠÙ‚Ø© if(list.some(x=>x.id===d.id)) return alert('Ù‡Ø°Ø§ Ø±Ù‚Ù… Ø§Ù„ÙˆØ«ÙŠÙ‚Ø© Ù…ÙˆØ¬ÙˆØ¯ Ù…Ø³Ø¨Ù‚Ù‹Ø§'); list.push(d); } save(); renderDocuments(); } function deleteDoc(kind, id){ const list = kind==='in'? db.docs.c12_in : db.docs.c12_out; if(!confirm('ØªØ£ÙƒÙŠØ¯ Ø­Ø°Ù Ø§Ù„ÙˆØ«ÙŠÙ‚Ø©ØŸ')) return; const i=list.findIndex(x=>x.id===id); if(i>-1) list.splice(i,1); save(); renderDocuments(); }

function openRepairDocForm(id){ const wrap=document.getElementById('rep_form'); const r = id? db.docs.repair.find(x=>x.id===id): {id:'',date:todayISO(),itemId:'',desc:'',vendor:'',cost:'',status:'Ù‚ÙŠØ¯ Ø§Ù„Ø¥ØµÙ„Ø§Ø­'}; wrap.classList.remove('hide'); wrap.innerHTML =  <div class="card" style="background:#0b1220;margin-top:10px"> <div class="grid cols-4"> <div><label>Ø±Ù‚Ù… Ø§Ù„ÙˆØ«ÙŠÙ‚Ø©</label><input id="r_id" value="${r.id}" placeholder="REP-2025-001"/></div> <div><label>Ø§Ù„ØªØ§Ø±ÙŠØ®</label><input id="r_date" type="date" value="${r.date}"/></div> <div><label>Ø§Ù„Ø¹Ù†ØµØ±</label><select id="r_item">${db.items.map(i=><option value="${i.id}" ${i.id===r.itemId?'selected':''}>${i.name}</option>).join('')}</select></div> <div><label>Ø§Ù„Ù…ÙˆØ±Ù‘Ø¯/Ù…Ø±ÙƒØ² Ø§Ù„ØµÙŠØ§Ù†Ø©</label><input id="r_vendor" value="${r.vendor||''}"/></div> <div class="cols-2" style="grid-column:span 2"><label>ÙˆØµÙ Ø§Ù„Ø¹Ø·Ù„</label><textarea id="r_desc">${r.desc||''}</textarea></div> <div><label>Ø§Ù„ØªÙƒÙ„ÙØ©</label><input id="r_cost" type="number" step="0.01" value="${r.cost||''}"/></div> <div><label>Ø§Ù„Ø­Ø§Ù„Ø©</label><select id="r_status">${['Ù‚ÙŠØ¯ Ø§Ù„ØªØ´Ø®ÙŠØµ','Ù‚ÙŠØ¯ Ø§Ù„Ø¥ØµÙ„Ø§Ø­','Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªÙ„Ø§Ù…','Ù…ØºÙ„Ù‚'].map(s=><option ${s===r.status?'selected':''}>${s}</option>).join('')}</select></div> </div> <div class="row" style="margin-top:10px"> <button class="btn primary" onclick="saveRepairDoc('${id||''}')">ğŸ’¾ Ø­ÙØ¸</button> <button class="btn ghost" onclick="document.getElementById('rep_form').classList.add('hide')">Ø¥ØºÙ„Ø§Ù‚</button> </div> </div> ; } function saveRepairDoc(id){ let r = id? db.docs.repair.find(x=>x.id===id): {}; const newId = document.getElementById('r_id').value.trim(); Object.assign(r, { id: newId, date: document.getElementById('r_date').value||todayISO(), itemId: document.getElementById('r_item').value, vendor: document.getElementById('r_vendor').value.trim(), desc: document.getElementById('r_desc').value.trim(), cost: document.getElementById('r_cost').value, status: document.getElementById('r_status').value }); if(!id){ if(db.docs.repair.some(x=>x.id===r.id)) return alert('Ø±Ù‚Ù… Ø§Ù„ÙˆØ«ÙŠÙ‚Ø© Ù…Ø³ØªØ®Ø¯Ù…'); db.docs.repair.push(r); } save(); renderDocuments(); } function deleteRepairDoc(id){ if(!confirm('ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°ÙØŸ'))return; const i=db.docs.repair.findIndex(x=>x.id===id); if(i>-1) db.docs.repair.splice(i,1); save(); renderDocuments(); }

/*********************************

ØµÙØ­Ø©: Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø´Ù‡Ø±ÙŠØ© *********************************/ function renderReports(){ const el=document.getElementById('page_reports'); const month = window.reportMonth || todayISO().slice(0,7); // ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ø´Ù‡Ø± const moves = db.moves.filter(m=>m.date.startsWith(month)); const repairs = db.docs.repair.filter(r=>r.date.startsWith(month)); const c12in = db.docs.c12_in.filter(d=>d.date.startsWith(month)); const c12out= db.docs.c12_out.filter(d=>d.date.startsWith(month));


const faulty = db.items.filter(i=>i.status==='bad').length; const fixing = db.items.filter(i=>i.status==='fix').length; const propose = db.items.filter(i=>i.status==='propose').length;

el.innerHTML = ` <div class="card"> <div class="row"> <label>Ø´Ù‡Ø± Ø§Ù„ØªÙ‚Ø±ÙŠØ±</label> <input type="month" id="r_month" value="${month}" onchange="reportMonth=this.value; renderReports();"/> <button class="btn ghost" onclick="downloadReport('${month}')">ğŸ–¨ï¸ ØªÙ†Ø²ÙŠÙ„ ØªÙ‚Ø±ÙŠØ± Ù†ØµÙŠ</button> </div> </div>

<div class="grid cols-3">
  <div class="card"><h3>Ø­Ø§Ù„Ø© Ø§Ù„Ø´Ø¨ÙƒØ©</h3><div>Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ù…Ø³Ø¬Ù‘Ù„Ø©: <b class="numbers-latin">${db.items.filter(i=>i.net&&(i.net.ip||i.net.mac)).length}</b></div></div>
  <div class="card"><h3>Ø§Ù„Ø¹ØªØ§Ø¯ Ø§Ù„Ø¹Ø§Ø·Ù„</h3><div class="numbers-latin">${faulty}</div></div>
  <div class="card"><h3>Ù‚ÙŠØ¯ Ø§Ù„ØªØµÙ„ÙŠØ­</h3><div class="numbers-latin">${fixing}</div></div>
</div>

<div class="grid cols-2">
  <div class="card">
    <h3>Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ§Ù„ØªÙˆØ²ÙŠØ¹</h3>
    <table><thead><tr><th>#</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„Ø¹Ù†ØµØ±</th><th>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th><th>Ù…Ù„Ø§Ø­Ø¸Ø©</th></tr></thead>
    <tbody>${moves.map((m,idx)=>`<tr><td class="numbers-latin">${idx+1}</td><td class="numbers-latin">${m.date}</td><td>${itemName(m.itemId)}</td><td>${userName(m.userId)||'-'}</td><td>${m.note||''}</td></tr>`).join('')}</tbody>
    </table>
  </div>
  <div class="card">
    <h3>ÙˆØ«Ø§Ø¦Ù‚ C12</h3>
    <div>Ø§Ù„Ø¯Ø®ÙˆÙ„ (ØªÙˆØ²ÙŠØ¹): <b class="numbers-latin">${c12in.length}</b> â€” Ø§Ù„Ø®Ø±ÙˆØ¬ (Ø§Ø³ØªØ±Ø¬Ø§Ø¹): <b class="numbers-latin">${c12out.length}</b></div>
    <table style="margin-top:8px"><thead><tr><th>#</th><th>Ø§Ù„Ù†ÙˆØ¹</th><th>Ø±Ù‚Ù… Ø§Ù„ÙˆØ«ÙŠÙ‚Ø©</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„Ø¹Ù†ØµØ±</th></tr></thead>
    <tbody>
      ${c12in.map((d,idx)=>`<tr><td class="numbers-latin">${idx+1}</td><td>Ø¯Ø®ÙˆÙ„</td><td class="numbers-latin">${d.id}</td><td class="numbers-latin">${d.date}</td><td>${itemName(d.itemId)}</td></tr>`).join('')}
      ${c12out.map((d,idx)=>`<tr><td class="numbers-latin">${idx+1}</td><td>Ø®Ø±ÙˆØ¬</td><td class="numbers-latin">${d.id}</td><td class="numbers-latin">${d.date}</td><td>${itemName(d.itemId)}</td></tr>`).join('')}
    </tbody></table>
  </div>
</div>

<div class="card">
  <h3>Ø³Ø¬Ù„ Ø§Ù„ØªØµÙ„ÙŠØ­ Ø®Ù„Ø§Ù„ Ø§Ù„Ø´Ù‡Ø±</h3>
  <table><thead><tr><th>#</th><th>Ø§Ù„ÙˆØ«ÙŠÙ‚Ø©</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„Ø¹Ù†ØµØ±</th><th>Ø§Ù„ÙˆØµÙ</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th><th>Ø§Ù„ØªÙƒÙ„ÙØ©</th></tr></thead>
  <tbody>${repairs.map((r,idx)=>`<tr>
    <td class="numbers-latin">${idx+1}</td>
    <td class="numbers-latin">${r.id}</td>
    <td class="numbers-latin">${r.date}</td>
    <td>${itemName(r.itemId)}</td>
    <td>${r.desc||''}</td>
    <td>${r.status||''}</td>
    <td class="numbers-latin">${r.cost||''}</td>
  </tr>`).join('')}</tbody></table>
</div>

`; }

function downloadReport(month){ const lines = []; const h = s=>lines.push('\n=== '+s+' ==='); lines.push('ØªÙ‚Ø±ÙŠØ± Ø´Ù‡Ø±ÙŠ â€” '+month); lines.push('Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹ØªØ§Ø¯: '+db.items.length); lines.push('Ø´ØºÙ‘Ø§Ù„: '+db.items.filter(i=>i.status==='ok').length+ ', Ù…Ø¹Ø·Ù‘Ù„: '+db.items.filter(i=>i.status==='bad').length+', Ù‚ÙŠØ¯ Ø§Ù„ØªØµÙ„ÙŠØ­: '+db.items.filter(i=>i.status==='fix').length+', Ù…Ù‚ØªØ±Ø­ Ù„Ù„ØµØ±Ù: '+db.items.filter(i=>i.status==='propose').length); h('Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†'); db.moves.filter(m=>m.date.startsWith(month)).forEach(m=>lines.push(${m.date} | ${itemName(m.itemId)} -> ${userName(m.userId)||'-'} | ${m.note||''})); h('ÙˆØ«Ø§Ø¦Ù‚ C12 Ø¯Ø®ÙˆÙ„'); db.docs.c12_in.filter(d=>d.date.startsWith(month)).forEach(d=>lines.push(${d.date} | ${d.id} | ${itemName(d.itemId)} | ${d.condition||''})); h('ÙˆØ«Ø§Ø¦Ù‚ C12 Ø®Ø±ÙˆØ¬'); db.docs.c12_out.filter(d=>d.date.startsWith(month)).forEach(d=>lines.push(${d.date} | ${d.id} | ${itemName(d.itemId)} | ${d.condition||''})); h('Ø§Ù„ØªØµÙ„ÙŠØ­'); db.docs.repair.filter(r=>r.date.startsWith(month)).forEach(r=>lines.push(${r.date} | ${r.id} | ${itemName(r.itemId)} | ${r.status} | ${r.cost||''})); download(report_${month}.txt, lines.join('\n')); }

/*********************************

ØµÙØ­Ø©: Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ *********************************/ function renderBackup(){ const el=document.getElementById('page_backup'); el.innerHTML = `

 <div class="card">
   <div class="row">
     <button class="btn primary" onclick="backupExport()">â¬‡ï¸ ØªÙ†Ø²ÙŠÙ„ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© (JSON)</button>
     <label class="btn ghost" style="cursor:pointer">â¬†ï¸ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù†Ø³Ø®Ø©<input id="backupFile" type="file" accept="application/json" style="display:none" onchange="backupImport(event)"></label>
     <button class="btn warn" onclick="if(confirm('Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· ÙƒØ§Ù…Ù„ØŸ')){ localStorage.removeItem(DB_KEY); location.reload(); }">â™»ï¸ Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</button>
   </div>
   <div class="footer">ÙŠØªÙ… Ø§Ù„ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠÙ‹Ø§ ÙÙ‚Ø·. Ø§Ø­ØªÙØ¸ Ø¨Ù†Ø³Ø®Ø© Ø®Ø§Ø±Ø¬ÙŠØ© Ø¨Ø´ÙƒÙ„ Ø¯ÙˆØ±ÙŠ.</div>
 </div>
`; } function backupExport(){ download('it_yard_backup.json', JSON.stringify(db,null,2)); } function backupImport(ev){ const f = ev.target.files[0]; if(!f) return; const reader=new FileReader(); reader.onload=()=>{ try{ const json=JSON.parse(reader.result); localStorage.setItem(DB_KEY, JSON.stringify(json)); alert('ØªÙ… Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨Ù†Ø¬Ø§Ø­'); location.reload(); }catch(e){ alert('Ù…Ù„Ù ØºÙŠØ± ØµØ§Ù„Ø­'); } }; reader.readAsText(f); }

/*********************************

Ø¥Ù‚Ù„Ø§Ø¹ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ + Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø®ÙÙŠÙØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©) *********************************/ function seedIfEmpty(){ if(db.items.length||db.users.length) return; const u1={id:uid('u'),fullName:'Ø£Ø­Ù…Ø¯ Ø¨Ù† ÙŠÙˆØ³Ù',role:'ØªÙ‚Ù†ÙŠ Ø¥Ø¹Ù„Ø§Ù… Ø¢Ù„ÙŠ',dept:'Ø§Ù„Ù…Ø¯ÙŠØ±ÙŠØ©',phone:'0550000000',email:'ahmed@example.com'}; const u2={id:uid('u'),fullName:'Ø³Ù…ÙŠØ±Ø© Ø¨ÙˆØ´Ø§Ø±Ø¨',role:'Ø¥Ø¯Ø§Ø±ÙŠØ©',dept:'Ø§Ù„Ù…Ø§Ù„ÙŠØ©',phone:'0661000000',email:'samira@example.com'}; db.users.push(u1,u2); db.items.push( {id:uid('it'),category:'computer',name:'Ø­Ø§Ø³ÙˆØ¨ Ù…ÙƒØªØ¨ 01',brand:'Dell',model:'OptiPlex 7050',serial:'PC-7050-001',status:'ok',assignedTo:u1.id,net:{ip:'192.168.1.10',mac:'AA:BB:CC:DD:EE:01'},note:''}, {id:uid('it'),category:'monitor',name:'Ø´Ø§Ø´Ø© 24"',brand:'Samsung',model:'S24F350',serial:'MN-24-110',status:'ok',assignedTo:u1.id,net:{},note:''}, {id:uid('it'),category:'printer',name:'Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©',brand:'Canon',model:'LBP232',serial:'PR-232-77',status:'ok',assignedTo:u2.id,net:{ip:'192.168.1.50',mac:'AA:BB:CC:DD:EE:50'},printer:{toner:'60%'},note:''} ); db.moves.push({id:uid('mv'),date:todayISO(),action:'ØªÙˆØ²ÙŠØ¹/ØªØ¨Ø¯ÙŠÙ„',itemId:db.items[0].id,userId:u1.id,note:'ØªØ«Ø¨ÙŠØª Ø¬Ø¯ÙŠØ¯'}); db.docs.c12_in.push({id:'C12-DEM-001',date:todayISO(),itemId:db.items[2].id,condition:'Ø¬ÙŠØ¯',note:'ÙˆØµÙ„ Ø¬Ø¯ÙŠØ¯'}); save(); }


// Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ØªØ´ØºÙŠÙ„ load(); seedIfEmpty(); renderNav();

goto('dashboard');

document.getElementById('today').textContent = new Date().toLocaleDateString('ar-DZ', {year:'numeric',month:'long',day:'numeric'}); renderKPIs(); </script>

</body>
</html>
